<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>SAP | Liam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="表中使用的字段请尽量参照各模块的SAP字段标准使用习惯；例：“ZXSLRZX销售组织对应的利润中心”中的销售组织应该使用VKORG、利润中心应该使用PRCTR。根据表的用途，需确定是否属于配置目的、还是业务目的。配置表的建议：需要加入MANDT字段例： “ZQJQD缺件清单”就没有MANDT字段需提供相应的维护视图； 部分关系梳理公司代码与工厂的关系一个工厂只能属于一个公司代码；例：3110起重机">
<meta property="og:type" content="article">
<meta property="og:title" content="SAP">
<meta property="og:url" content="http://yoursite.com/2017/12/12/SAP/index.html">
<meta property="og:site_name" content="Liam">
<meta property="og:description" content="表中使用的字段请尽量参照各模块的SAP字段标准使用习惯；例：“ZXSLRZX销售组织对应的利润中心”中的销售组织应该使用VKORG、利润中心应该使用PRCTR。根据表的用途，需确定是否属于配置目的、还是业务目的。配置表的建议：需要加入MANDT字段例： “ZQJQD缺件清单”就没有MANDT字段需提供相应的维护视图； 部分关系梳理公司代码与工厂的关系一个工厂只能属于一个公司代码；例：3110起重机">
<meta property="og:updated_time" content="2017-12-12T01:48:01.917Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SAP">
<meta name="twitter:description" content="表中使用的字段请尽量参照各模块的SAP字段标准使用习惯；例：“ZXSLRZX销售组织对应的利润中心”中的销售组织应该使用VKORG、利润中心应该使用PRCTR。根据表的用途，需确定是否属于配置目的、还是业务目的。配置表的建议：需要加入MANDT字段例： “ZQJQD缺件清单”就没有MANDT字段需提供相应的维护视图； 部分关系梳理公司代码与工厂的关系一个工厂只能属于一个公司代码；例：3110起重机">
  
    <link rel="alternate" href="/atom.xml" title="Liam" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Liam</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-SAP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/12/SAP/" class="article-date">
  <time datetime="2017-12-12T01:45:57.630Z" itemprop="datePublished">2017-12-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      SAP
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>表中使用的字段请尽量参照各模块的SAP字段标准使用习惯；<br>例：“ZXSLRZX销售组织对应的利润中心”中的销售组织应该使用VKORG、利润中心应该使用PRCTR。<br>根据表的用途，需确定是否属于配置目的、还是业务目的。<br>配置表的建议：<br>需要加入MANDT字段<br>例： “ZQJQD缺件清单”就没有MANDT字段<br>需提供相应的维护视图；</p>
<h2 id="部分关系梳理"><a href="#部分关系梳理" class="headerlink" title="部分关系梳理"></a>部分关系梳理</h2><h3 id="公司代码与工厂的关系"><a href="#公司代码与工厂的关系" class="headerlink" title="公司代码与工厂的关系"></a>公司代码与工厂的关系</h3><p>一个工厂只能属于一个公司代码；<br>例：3110起重机工厂只能属于3011公司代码。<br>表：T001K，其中的BWKEY就是指工厂，完全等同于T001W的WERKS；</p>
<h3 id="公司代码与利润中心的关系"><a href="#公司代码与利润中心的关系" class="headerlink" title="公司代码与利润中心的关系"></a>公司代码与利润中心的关系</h3><p>SAP是允许一个利润中心属于多个公司代码的，但是，我们实际业务上一个利润中心通常只应该对应一个公司代码（有部分特例！）<br>一个公司代码下，可以存在多个利润中心；<br>例：在2001公司代码下，存在LR2180/LR2170/LR2160等多个利润中心；<br>表：CEPC_BUKRS分配利润中心至公司代码</p>
<h3 id="工厂与利润中心的关系"><a href="#工厂与利润中心的关系" class="headerlink" title="工厂与利润中心的关系"></a>工厂与利润中心的关系</h3><p>工厂跟利润中心按照SAP的本身逻辑是没有关系的；<br> 但为了保证业务的正确性，我们创建了表ZCHECK_MM01（工厂和利润中心的对应）来进行检查（如在物料主数据创建的时候进行检查）。</p>
<h3 id="工厂与库存地点的关系"><a href="#工厂与库存地点的关系" class="headerlink" title="工厂与库存地点的关系"></a>工厂与库存地点的关系</h3><p>库存地点必须跟工厂一起才有意义，牢记“工厂+库存地点”！<br>在不同的工厂下虽然可以存在同样的库存地点代码，但本质上是有区别的；<br>T001L，工厂+库存地点</p>
<h3 id="WM仓库与库存地点的关系"><a href="#WM仓库与库存地点的关系" class="headerlink" title="WM仓库与库存地点的关系"></a>WM仓库与库存地点的关系</h3><p>一个仓库可以包括多个“工厂+库存地点”，一个“工厂+库存地点”只能属于一个仓库；<br> T320，工厂+库存地点=&gt;仓库号</p>
<h3 id="销售组织与公司代码的关系"><a href="#销售组织与公司代码的关系" class="headerlink" title="销售组织与公司代码的关系"></a>销售组织与公司代码的关系</h3><p>一个销售组织只能属于一个公司代码；<br>例：3011宁乡起重机销售组织只能属于3011公司代码。<br>表： TVKO销售组织；</p>
<h3 id="采购组织与工厂的关系"><a href="#采购组织与工厂的关系" class="headerlink" title="采购组织与工厂的关系"></a>采购组织与工厂的关系</h3><p>采购组织与工厂是多对多的关系（但是如果采购组织已经分配给公司代码后，则只能分配该公司代码下的工厂给采购组织）<br>T024W工厂的有效采购组织<br>不能根据字段在前台所属的物料视图来确定相应的数据表，一定要使用F1-&gt;技术信息；<br>    例：采购视图的“采购价值代码”就是属于基本数据（MARA-EKWSL)。</p>
<h2 id="SAP常用表"><a href="#SAP常用表" class="headerlink" title="SAP常用表"></a>SAP常用表</h2><h3 id="物料主数据的关键表："><a href="#物料主数据的关键表：" class="headerlink" title="物料主数据的关键表："></a>物料主数据的关键表：</h3><p>MARA，基本视图<br>MARC，工厂<br>MARD，工厂/库存地点<br>MBEW，财务数据，其中的MBEW-BWKEY就是指工厂MARC-WERKS<br>MVKE，销售组织/分销渠道<br>MLGN，仓库<br>MLGT，仓库/存储类型<br>MSTA，物料主数据维护状态</p>
<h3 id="BOM主数据"><a href="#BOM主数据" class="headerlink" title="BOM主数据"></a>BOM主数据</h3><p>BOM用途：1表示生产<br>BOM类别：M表示物料BOM<br>MAST，BOM 链接物料<br>STKO，BOM表头<br>STPO，BOM 项目<br>STZU，永久 BOM 数据<br>STAS，BOMs - 项选择</p>
<h3 id="工艺路线主数据"><a href="#工艺路线主数据" class="headerlink" title="工艺路线主数据"></a>工艺路线主数据</h3><p>任务清单类型：N表示工艺路线、Q表示检验计划<br>MAPL，分配任务清单到物料<br>PLKO，任务清单 - 表头<br>PLFL，任务清单 - 顺序<br>PLPO，任务清单 - 工序/作业<br>PLAS，任务清单 - 工序/作业选择<br>PLMZ，组件分配<br>CRHD，工作中心</p>
<h3 id="独立需求"><a href="#独立需求" class="headerlink" title="独立需求"></a>独立需求</h3><p>PBIM，物料的独立需求<br>PBED，独立需求数据<br>PBID，独立需求数据（MRP区域）<br>PBHI ，独立需求历史记录</p>
<h3 id="计划订单"><a href="#计划订单" class="headerlink" title="计划订单"></a>计划订单</h3><p>PLAF，计划订单，需注意计划工厂PLWRK、生产工厂PWWRK的区别；<br>RESB，预留表（通过PLAF-RSNUM与RESB-RSNUM关联）</p>
<h3 id="生产订单"><a href="#生产订单" class="headerlink" title="生产订单"></a>生产订单</h3><p>订单类别： AUTYP，10表示生产订单<br>AUFK，订单主数据<br>  其中WERKS 工厂是指生产订单的生产工厂、 LOEKZ删除标记是对删除状态的生产订单生效（其他状态需通过JEST）进行读取。<br>AFKO，订单表头数据 PP 订单<br>  其中PLNBEZ 、STLBEZ并不一定是订单中产出物料（真正的物料应该是AFPO-MATNR）。<br>AFPO，订单项<br>  虽然关键字中存在POSNR，但实际上我们不存在co-product业务，所以POSNR都为0001.<br>AFVC,订单的工序(通过AFKO- AUFPL进行关联）<br>AFVV,工序中数量/日期/值的DB结构<br>AFFL，加工单顺序<br>JEST，订单状态（通过AUFK-OBJNR关联）<br> 其中STAT的具体含义通过TJ02T对应，注意当INACT=X时，表示该状态不存在。<br>RESB，预留表（通过AFKO-RSNUM与RESB-RSNUM关联）</p>
<h3 id="报工-入库-发料"><a href="#报工-入库-发料" class="headerlink" title="报工/入库/发料"></a>报工/入库/发料</h3><p>AFRU，订单确认（AFRU-AUFNR为订单号）<br>AFFW，COGI错误（AFFW-AUFNR为订单号）<br>由于我们没有激活COGI更改历史，所以COGI的更改在AFFWPRO中是没有记录的，若有必要，可通过自定义备份表ZAFFWH进行查看。<br> AUFM，订单物料移动数据（AUFM-AUFNR为订单号）<br>该表的数据更新需依赖于PP的相关配置。此外，如果需要得到某一预留的累计发料数量，可直接使用RESB-ENMNG；如果需要得到某一订单的累计入库数量，可直接使用AFPO-WEMNG。均不需要对物料移动数据进行累加。</p>
<h3 id="供应商主数据"><a href="#供应商主数据" class="headerlink" title="供应商主数据"></a>供应商主数据</h3><p>LFA1，集团数据<br>ADRC，地址信息<br>LFB1，公司代码数据<br>LFM1，采购组织数据</p>
<h3 id="计划订单-1"><a href="#计划订单-1" class="headerlink" title="计划订单"></a>计划订单</h3><p>PLAF，计划订单；</p>
<h3 id="采购合同"><a href="#采购合同" class="headerlink" title="采购合同"></a>采购合同</h3><p>PLAF，计划订单；</p>
<h3 id="采购合同-1"><a href="#采购合同-1" class="headerlink" title="采购合同"></a>采购合同</h3><p>凭证类别（EKKO-BSTYP）等于K（合同）<br>EKKO，采购凭证抬头<br>EKPO，采购凭证项目</p>
<h3 id="采购信息记录"><a href="#采购信息记录" class="headerlink" title="采购信息记录"></a>采购信息记录</h3><p>信息记录类别(EINE-ESOKZ)：0（标准）、 2（寄售）、3（分包合同）<br>EINA ，采购信息记录 - 一般数据<br>EINE ，采购信息记录 - 采购组织数据</p>
<h3 id="采购申请"><a href="#采购申请" class="headerlink" title="采购申请"></a>采购申请</h3><p>EBAN，采购申请</p>
<h3 id="采购订单"><a href="#采购订单" class="headerlink" title="采购订单"></a>采购订单</h3><p>凭证类别（EKKO-BSTYP）等于F（采购订单）<br>关键表：<br>EKKO，采购凭证抬头<br>EKPO，采购凭证项目<br>EKET，计划协议计划行<br>EKKN，采购凭证中的帐户设置</p>
<h3 id="采购收货及发票校验"><a href="#采购收货及发票校验" class="headerlink" title="采购收货及发票校验"></a>采购收货及发票校验</h3><p>EKBE，采购凭证历史<br>如果需要得到某一采购订单行项目的累计入库数量，可直接使用EKET-WEMNG，不需要对物料移动数据进行累加。 （虽然SAP是允许同一采购订单行项目是允许多个交货计划（EKET），但我们实际上业务中只允许一个交货计划，很多开发和考核都是基于此）<br>RBKP，凭证表头：发票收据<br>RSEG，凭证项目：收款发票<br>通过发票凭证读取会计凭证建议使用函数AC_DOCUMENT_RECORD。</p>
<h3 id="仓位主数据"><a href="#仓位主数据" class="headerlink" title="仓位主数据"></a>仓位主数据</h3><p>仓位必须跟仓库号、仓储类型一起才有意义，牢记“仓库号+仓储类型+仓位”！<br>关键表：<br>LAGP，仓位</p>
<h3 id="库存数据"><a href="#库存数据" class="headerlink" title="库存数据"></a>库存数据</h3><p>IM库存数据（注意使用待H的数据）：<br>MARD，物料的仓储位置数据<br>MSLB，供应商特殊库存（o）<br>MKOL，供应商的特殊库存（k）<br>MSKA，销售订单库存<br>MCH1/MCHB，批次库存</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/12/SAP/" data-id="cjb4ejemb0000u4mislx4h5l4" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2017/12/11/SAPTable/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">SAP 常用表</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/12/SAP/">SAP</a>
          </li>
        
          <li>
            <a href="/2017/12/11/SAPTable/">SAP 常用表</a>
          </li>
        
          <li>
            <a href="/2017/12/11/hello-world/">First On Blo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Liam<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>